<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Solar System</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Arial', sans-serif;
            overflow: hidden;
            background: #000;
            color: #fff;
        }
        #canvas-container {
            width: 100vw;
            height: 100vh;
        }
        #controls {
            position: absolute;
            top: 20px;
            left: 20px;
            background: rgba(0, 0, 0, 0.7);
            padding: 20px;
            border-radius: 10px;
            backdrop-filter: blur(10px);
            z-index: 100;
        }
        #controls h2 {
            margin-bottom: 15px;
            font-size: 18px;
            color: #ffa500;
        }
        .control-group {
            margin-bottom: 15px;
        }
        .control-group label {
            display: block;
            margin-bottom: 5px;
            font-size: 14px;
        }
        .control-group input[type="range"] {
            width: 200px;
        }
        .control-group span {
            display: inline-block;
            min-width: 40px;
            text-align: right;
            margin-left: 10px;
            color: #ffa500;
        }
        #planet-info {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(0, 0, 0, 0.8);
            padding: 20px;
            border-radius: 10px;
            backdrop-filter: blur(10px);
            max-width: 300px;
            display: none;
            z-index: 100;
        }
        #planet-info h2 {
            color: #ffa500;
            margin-bottom: 10px;
        }
        #planet-info p {
            margin-bottom: 8px;
            font-size: 14px;
            line-height: 1.5;
        }
        #planet-info .close-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background: #ffa500;
            border: none;
            color: #000;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            cursor: pointer;
            font-weight: bold;
        }
        #instructions {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.7);
            padding: 15px 25px;
            border-radius: 10px;
            backdrop-filter: blur(10px);
            text-align: center;
            font-size: 14px;
        }
        .loading {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 24px;
            color: #ffa500;
        }
    </style>
</head>
<body>
    <div id="canvas-container"></div>
    
    <div id="controls">
        <h2>Solar System Controls</h2>
        <div class="control-group">
            <label for="speed-control">Time Speed:</label>
            <input type="range" id="speed-control" min="0" max="5" step="0.1" value="1">
            <span id="speed-value">1.0x</span>
        </div>
        <div class="control-group">
            <label for="orbit-toggle">
                <input type="checkbox" id="orbit-toggle" checked> Show Orbit Lines
            </label>
        </div>
    </div>

    <div id="planet-info">
        <button class="close-btn" onclick="closePlanetInfo()">Ã—</button>
        <h2 id="planet-name"></h2>
        <p id="planet-description"></p>
        <p><strong>Diameter:</strong> <span id="planet-diameter"></span></p>
        <p><strong>Distance from Sun:</strong> <span id="planet-distance"></span></p>
        <p><strong>Orbital Period:</strong> <span id="planet-period"></span></p>
        <p><strong>Day Length:</strong> <span id="planet-day"></span></p>
    </div>

    <div id="instructions">
        Click on a planet to view details | Drag to rotate | Scroll to zoom
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script>
        // Scene setup
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 10000);
        const renderer = new THREE.WebGLRenderer({ antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.shadowMap.enabled = true;
        document.getElementById('canvas-container').appendChild(renderer.domElement);

        // Camera position
        camera.position.set(0, 150, 250);
        camera.lookAt(0, 0, 0);

        // Starfield background
        function createStarfield() {
            const starsGeometry = new THREE.BufferGeometry();
            const starsMaterial = new THREE.PointsMaterial({ color: 0xFFFFFF, size: 0.7 });
            
            const starsVertices = [];
            for (let i = 0; i < 10000; i++) {
                const x = (Math.random() - 0.5) * 4000;
                const y = (Math.random() - 0.5) * 4000;
                const z = (Math.random() - 0.5) * 4000;
                starsVertices.push(x, y, z);
            }
            
            starsGeometry.setAttribute('position', new THREE.Float32BufferAttribute(starsVertices, 3));
            const starField = new THREE.Points(starsGeometry, starsMaterial);
            scene.add(starField);
        }
        createStarfield();

        // Procedural texture generation
        function createPlanetTexture(color1, color2, noiseScale = 0.1) {
            const canvas = document.createElement('canvas');
            canvas.width = 512;
            canvas.height = 512;
            const ctx = canvas.getContext('2d');
            
            const imageData = ctx.createImageData(512, 512);
            const data = imageData.data;
            
            for (let y = 0; y < 512; y++) {
                for (let x = 0; x < 512; x++) {
                    const idx = (y * 512 + x) * 4;
                    const noise = Math.sin(x * noiseScale) * Math.cos(y * noiseScale) * 0.5 + 0.5;
                    const mix = noise;
                    
                    data[idx] = color1.r * (1 - mix) + color2.r * mix;
                    data[idx + 1] = color1.g * (1 - mix) + color2.g * mix;
                    data[idx + 2] = color1.b * (1 - mix) + color2.b * mix;
                    data[idx + 3] = 255;
                }
            }
            
            ctx.putImageData(imageData, 0, 0);
            const texture = new THREE.CanvasTexture(canvas);
            return texture;
        }

        // Sun
        const sunGeometry = new THREE.SphereGeometry(15, 32, 32);
        const sunMaterial = new THREE.MeshBasicMaterial({ 
            color: 0xFDB813,
            emissive: 0xFDB813,
            emissiveIntensity: 1
        });
        const sun = new THREE.Mesh(sunGeometry, sunMaterial);
        scene.add(sun);

        // Sun glow
        const glowGeometry = new THREE.SphereGeometry(17, 32, 32);
        const glowMaterial = new THREE.MeshBasicMaterial({
            color: 0xFFA500,
            transparent: true,
            opacity: 0.3
        });
        const sunGlow = new THREE.Mesh(glowGeometry, glowMaterial);
        scene.add(sunGlow);

        // Lighting
        const sunLight = new THREE.PointLight(0xFFFFFF, 2, 1000);
        sunLight.position.set(0, 0, 0);
        scene.add(sunLight);

        const ambientLight = new THREE.AmbientLight(0x333333);
        scene.add(ambientLight);

        // Planet data
        const planetData = {
            mercury: {
                name: "Mercury",
                size: 3,
                distance: 40,
                orbitSpeed: 0.04,
                rotationSpeed: 0.004,
                color1: { r: 169, g: 169, b: 169 },
                color2: { r: 105, g: 105, b: 105 },
                eccentricity: 0.2,
                description: "The smallest planet in our solar system and closest to the Sun.",
                diameter: "4,879 km",
                distanceFromSun: "57.9 million km",
                orbitalPeriod: "88 Earth days",
                dayLength: "59 Earth days"
            },
            venus: {
                name: "Venus",
                size: 6,
                distance: 65,
                orbitSpeed: 0.015,
                rotationSpeed: -0.002,
                color1: { r: 255, g: 198, b: 73 },
                color2: { r: 205, g: 133, b: 63 },
                eccentricity: 0.007,
                description: "The hottest planet in our solar system, known for its thick, toxic atmosphere.",
                diameter: "12,104 km",
                distanceFromSun: "108.2 million km",
                orbitalPeriod: "225 Earth days",
                dayLength: "243 Earth days"
            },
            earth: {
                name: "Earth",
                size: 6.5,
                distance: 95,
                orbitSpeed: 0.01,
                rotationSpeed: 0.02,
                color1: { r: 0, g: 105, b: 148 },
                color2: { r: 34, g: 139, b: 34 },
                eccentricity: 0.017,
                description: "Our home planet, the only known planet to support life.",
                diameter: "12,742 km",
                distanceFromSun: "149.6 million km",
                orbitalPeriod: "365.25 days",
                dayLength: "24 hours"
            },
            mars: {
                name: "Mars",
                size: 4.5,
                distance: 125,
                orbitSpeed: 0.008,
                rotationSpeed: 0.018,
                color1: { r: 193, g: 68, b: 14 },
                color2: { r: 139, g: 69, b: 19 },
                eccentricity: 0.093,
                description: "The Red Planet, known for its iron oxide-rich surface.",
                diameter: "6,779 km",
                distanceFromSun: "227.9 million km",
                orbitalPeriod: "687 Earth days",
                dayLength: "24.6 hours"
            },
            jupiter: {
                name: "Jupiter",
                size: 12,
                distance: 180,
                orbitSpeed: 0.002,
                rotationSpeed: 0.04,
                color1: { r: 216, g: 202, b: 157 },
                color2: { r: 191, g: 143, b: 105 },
                eccentricity: 0.048,
                description: "The largest planet in our solar system, a gas giant with a Great Red Spot.",
                diameter: "139,820 km",
                distanceFromSun: "778.5 million km",
                orbitalPeriod: "11.86 Earth years",
                dayLength: "9.9 hours"
            },
            saturn: {
                name: "Saturn",
                size: 10,
                distance: 240,
                orbitSpeed: 0.0009,
                rotationSpeed: 0.038,
                color1: { r: 250, g: 235, b: 215 },
                color2: { r: 244, g: 164, b: 96 },
                eccentricity: 0.056,
                description: "Known for its spectacular ring system, the second-largest planet.",
                diameter: "116,460 km",
                distanceFromSun: "1.43 billion km",
                orbitalPeriod: "29.46 Earth years",
                dayLength: "10.7 hours"
            },
            uranus: {
                name: "Uranus",
                size: 8,
                distance: 300,
                orbitSpeed: 0.0004,
                rotationSpeed: -0.03,
                color1: { r: 79, g: 208, b: 231 },
                color2: { r: 175, g: 238, b: 238 },
                eccentricity: 0.046,
                description: "An ice giant that rotates on its side, giving it extreme seasons.",
                diameter: "50,724 km",
                distanceFromSun: "2.87 billion km",
                orbitalPeriod: "84 Earth years",
                dayLength: "17.2 hours"
            },
            neptune: {
                name: "Neptune",
                size: 7.5,
                distance: 350,
                orbitSpeed: 0.0001,
                rotationSpeed: 0.032,
                color1: { r: 30, g: 144, b: 255 },
                color2: { r: 65, g: 105, b: 225 },
                eccentricity: 0.009,
                description: "The windiest planet in our solar system, an ice giant with a deep blue color.",
                diameter: "49,244 km",
                distanceFromSun: "4.50 billion km",
                orbitalPeriod: "164.8 Earth years",
                dayLength: "16.1 hours"
            }
        };

        // Create planets
        const planets = [];
        const orbitLines = [];

        function createOrbitLine(distance, eccentricity) {
            const curve = new THREE.EllipseCurve(
                0, 0,
                distance, distance * (1 - eccentricity * eccentricity),
                0, 2 * Math.PI,
                false,
                0
            );
            
            const points = curve.getPoints(100);
            const geometry = new THREE.BufferGeometry().setFromPoints(points);
            const material = new THREE.LineBasicMaterial({ 
                color: 0x444444,
                transparent: true,
                opacity: 0.3
            });
            
            const ellipse = new THREE.Line(geometry, material);
            ellipse.rotation.x = Math.PI / 2;
            scene.add(ellipse);
            return ellipse;
        }

        Object.keys(planetData).forEach(key => {
            const data = planetData[key];
            
            // Create orbit line
            const orbitLine = createOrbitLine(data.distance, data.eccentricity);
            orbitLines.push(orbitLine);
            
            // Create planet
            const geometry = new THREE.SphereGeometry(data.size, 32, 32);
            const texture = createPlanetTexture(data.color1, data.color2, 0.05);
            const material = new THREE.MeshStandardMaterial({ 
                map: texture,
                roughness: 0.7,
                metalness: 0.2
            });
            
            const planet = new THREE.Mesh(geometry, material);
            planet.castShadow = true;
            planet.receiveShadow = true;
            
            // Store planet data
            planet.userData = {
                ...data,
                angle: Math.random() * Math.PI * 2,
                key: key
            };
            
            scene.add(planet);
            planets.push(planet);
            
            // Add rings to Saturn
            if (key === 'saturn') {
                const ringGeometry = new THREE.RingGeometry(data.size * 1.2, data.size * 2, 64);
                const ringMaterial = new THREE.MeshBasicMaterial({
                    color: 0xC9B382,
                    side: THREE.DoubleSide,
                    transparent: true,
                    opacity: 0.6
                });
                const rings = new THREE.Mesh(ringGeometry, ringMaterial);
                rings.rotation.x = Math.PI / 2;
                planet.add(rings);
            }
        });

        // Mouse interaction
        const raycaster = new THREE.Raycaster();
        const mouse = new THREE.Vector2();

        function onMouseClick(event) {
            mouse.x = (event.clientX / window.innerWidth) * 2 - 1;
            mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;
            
            raycaster.setFromCamera(mouse, camera);
            const intersects = raycaster.intersectObjects(planets);
            
            if (intersects.length > 0) {
                const planet = intersects[0].object;
                showPlanetInfo(planet.userData);
            }
        }

        window.addEventListener('click', onMouseClick);

        function showPlanetInfo(data) {
            document.getElementById('planet-name').textContent = data.name;
            document.getElementById('planet-description').textContent = data.description;
            document.getElementById('planet-diameter').textContent = data.diameter;
            document.getElementById('planet-distance').textContent = data.distanceFromSun;
            document.getElementById('planet-period').textContent = data.orbitalPeriod;
            document.getElementById('planet-day').textContent = data.dayLength;
            document.getElementById('planet-info').style.display = 'block';
        }

        function closePlanetInfo() {
            document.getElementById('planet-info').style.display = 'none';
        }

        // Camera controls
        let isDragging = false;
        let previousMousePosition = { x: 0, y: 0 };
        let cameraRotation = { x: 0, y: 0 };

        renderer.domElement.addEventListener('mousedown', (e) => {
            isDragging = true;
            previousMousePosition = { x: e.clientX, y: e.clientY };
        });

        renderer.domElement.addEventListener('mousemove', (e) => {
            if (isDragging) {
                const deltaX = e.clientX - previousMousePosition.x;
                const deltaY = e.clientY - previousMousePosition.y;
                
                cameraRotation.y += deltaX * 0.005;
                cameraRotation.x += deltaY * 0.005;
                
                cameraRotation.x = Math.max(-Math.PI / 2, Math.min(Math.PI / 2, cameraRotation.x));
                
                previousMousePosition = { x: e.clientX, y: e.clientY };
            }
        });

        renderer.domElement.addEventListener('mouseup', () => {
            isDragging = false;
        });

        renderer.domElement.addEventListener('wheel', (e) => {
            e.preventDefault();
            const zoomSpeed = 0.1;
            const distance = camera.position.length();
            const newDistance = distance + e.deltaY * zoomSpeed;
            
            if (newDistance > 50 && newDistance < 1000) {
                camera.position.multiplyScalar(newDistance / distance);
            }
        });

        // UI Controls
        let timeSpeed = 1.0;
        let showOrbits = true;

        document.getElementById('speed-control').addEventListener('input', (e) => {
            timeSpeed = parseFloat(e.target.value);
            document.getElementById('speed-value').textContent = timeSpeed.toFixed(1) + 'x';
        });

        document.getElementById('orbit-toggle').addEventListener('change', (e) => {
            showOrbits = e.target.checked;
            orbitLines.forEach(line => {
                line.visible = showOrbits;
            });
        });

        // Animation loop
        function animate() {
            requestAnimationFrame(animate);
            
            // Update camera position
            const radius = camera.position.length();
            camera.position.x = radius * Math.sin(cameraRotation.y) * Math.cos(cameraRotation.x);
            camera.position.y = radius * Math.sin(cameraRotation.x);
            camera.position.z = radius * Math.cos(cameraRotation.y) * Math.cos(cameraRotation.x);
            camera.lookAt(0, 0, 0);
            
            // Rotate sun
            sun.rotation.y += 0.001;
            sunGlow.rotation.y -= 0.001;
            
            // Update planets
            planets.forEach(planet => {
                const data = planet.userData;
                
                // Orbital motion (elliptical)
                data.angle += data.orbitSpeed * timeSpeed;
                
                const a = data.distance;
                const b = data.distance * Math.sqrt(1 - data.eccentricity * data.eccentricity);
                const c = data.distance * data.eccentricity;
                
                planet.position.x = a * Math.cos(data.angle) - c;
                planet.position.z = b * Math.sin(data.angle);
                
                // Axial rotation
                planet.rotation.y += data.rotationSpeed * timeSpeed;
            });
            
            renderer.render(scene, camera);
        }

        // Handle window resize
        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });

        // Start animation
        animate();
    </script>
</body>
</html>