<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive 3D Solar System</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Arial', sans-serif;
            overflow: hidden;
            background: #000;
            color: #fff;
        }
        
        #canvas-container {
            width: 100vw;
            height: 100vh;
            position: relative;
        }
        
        #info-panel {
            position: absolute;
            top: 20px;
            left: 20px;
            background: rgba(0, 0, 0, 0.8);
            padding: 20px;
            border-radius: 10px;
            border: 2px solid #4a9eff;
            max-width: 300px;
            z-index: 100;
        }
        
        #info-panel h2 {
            color: #4a9eff;
            margin-bottom: 10px;
            font-size: 24px;
        }
        
        #info-panel p {
            margin: 8px 0;
            line-height: 1.6;
            font-size: 14px;
        }
        
        #controls {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.8);
            padding: 20px;
            border-radius: 10px;
            border: 2px solid #4a9eff;
            display: flex;
            align-items: center;
            gap: 20px;
            z-index: 100;
        }
        
        #controls label {
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        #time-speed {
            width: 150px;
            cursor: pointer;
        }
        
        #speed-value {
            color: #4a9eff;
            font-weight: bold;
            min-width: 40px;
        }
        
        button {
            background: #4a9eff;
            color: #fff;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            transition: background 0.3s;
        }
        
        button:hover {
            background: #357abd;
        }
        
        #instructions {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(0, 0, 0, 0.8);
            padding: 15px;
            border-radius: 10px;
            border: 2px solid #4a9eff;
            max-width: 250px;
            font-size: 12px;
            z-index: 100;
        }
        
        #instructions h3 {
            color: #4a9eff;
            margin-bottom: 10px;
        }
        
        #instructions ul {
            list-style: none;
            padding-left: 0;
        }
        
        #instructions li {
            margin: 5px 0;
            padding-left: 15px;
            position: relative;
        }
        
        #instructions li:before {
            content: "▸";
            position: absolute;
            left: 0;
            color: #4a9eff;
        }
        
        .loading {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 24px;
            color: #4a9eff;
        }
    </style>
</head>
<body>
    <div id="canvas-container">
        <div class="loading">Loading Solar System...</div>
    </div>
    
    <div id="info-panel" style="display: none;">
        <h2 id="planet-name">Solar System</h2>
        <p id="planet-info">Click on a planet to learn more about it!</p>
    </div>
    
    <div id="instructions">
        <h3>Controls</h3>
        <ul>
            <li>Left Click + Drag: Rotate view</li>
            <li>Right Click + Drag: Pan view</li>
            <li>Scroll: Zoom in/out</li>
            <li>Click Planet: View details</li>
        </ul>
    </div>
    
    <div id="controls">
        <label>
            Time Speed:
            <input type="range" id="time-speed" min="0" max="10" value="1" step="0.1">
            <span id="speed-value">1.0x</span>
        </label>
        <button id="reset-view">Reset View</button>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script>
        // Planet data with facts
        const planetData = {
            mercury: {
                name: "Mercury",
                radius: 0.4,
                distance: 10,
                color: 0x8c7853,
                speed: 4.09,
                rotationSpeed: 0.005,
                tilt: 0.034,
                eccentricity: 0.206,
                info: "Mercury is the smallest and innermost planet. It has no atmosphere and extreme temperature variations. Surface temperature ranges from -173°C to 427°C. One day on Mercury lasts 59 Earth days."
            },
            venus: {
                name: "Venus",
                radius: 0.95,
                distance: 15,
                color: 0xffc649,
                speed: 1.62,
                rotationSpeed: -0.002,
                tilt: 2.64,
                eccentricity: 0.007,
                info: "Venus is the hottest planet with surface temperatures around 462°C. Its thick atmosphere is mostly CO2, creating a runaway greenhouse effect. Venus rotates backwards compared to most planets."
            },
            earth: {
                name: "Earth",
                radius: 1,
                distance: 20,
                color: 0x4a90e2,
                speed: 1.0,
                rotationSpeed: 0.01,
                tilt: 23.44,
                eccentricity: 0.017,
                info: "Earth is the only known planet with life. It has liquid water, a protective atmosphere, and a magnetic field. 71% of the surface is covered by water. The atmosphere is 78% nitrogen and 21% oxygen."
            },
            mars: {
                name: "Mars",
                radius: 0.53,
                distance: 25,
                color: 0xdc4d2a,
                speed: 0.53,
                rotationSpeed: 0.009,
                tilt: 25.19,
                eccentricity: 0.093,
                info: "Mars is known as the Red Planet due to iron oxide on its surface. It has the largest volcano in the solar system (Olympus Mons) and massive dust storms. Evidence suggests water once flowed on Mars."
            },
            jupiter: {
                name: "Jupiter",
                radius: 2.5,
                distance: 35,
                color: 0xd8a869,
                speed: 0.084,
                rotationSpeed: 0.04,
                tilt: 3.13,
                eccentricity: 0.048,
                info: "Jupiter is the largest planet, with a mass 2.5 times that of all other planets combined. The Great Red Spot is a storm that has raged for at least 400 years. It has 79 known moons."
            },
            saturn: {
                name: "Saturn",
                radius: 2.1,
                distance: 45,
                color: 0xfad5a5,
                speed: 0.034,
                rotationSpeed: 0.038,
                tilt: 26.73,
                eccentricity: 0.056,
                info: "Saturn is famous for its spectacular ring system made of ice and rock particles. It's the least dense planet and could theoretically float in water. Saturn has 82 confirmed moons."
            },
            uranus: {
                name: "Uranus",
                radius: 1.6,
                distance: 55,
                color: 0x4fd0e7,
                speed: 0.012,
                rotationSpeed: 0.03,
                tilt: 97.77,
                eccentricity: 0.046,
                info: "Uranus rotates on its side, likely due to a massive collision. It's an ice giant with a blue-green color from methane in its atmosphere. A day on Uranus lasts about 17 hours."
            },
            neptune: {
                name: "Neptune",
                radius: 1.5,
                distance: 65,
                color: 0x4166f5,
                speed: 0.006,
                rotationSpeed: 0.032,
                tilt: 28.32,
                eccentricity: 0.009,
                info: "Neptune is the windiest planet with speeds reaching 2,100 km/h. It's the most distant planet from the Sun. Neptune has 14 known moons, with Triton being the largest and geologically active."
            }
        };

        // Scene setup
        let scene, camera, renderer, controls;
        let sun, planets = {}, orbitLines = {};
        let raycaster, mouse;
        let timeSpeed = 1;
        let selectedPlanet = null;

        // Initialize scene
        function init() {
            // Scene
            scene = new THREE.Scene();
            
            // Camera
            camera = new THREE.PerspectiveCamera(
                75,
                window.innerWidth / window.innerHeight,
                0.1,
                1000
            );
            camera.position.set(0, 30, 50);
            camera.lookAt(0, 0, 0);
            
            // Renderer
            renderer = new THREE.WebGLRenderer({ antialias: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.shadowMap.enabled = true;
            renderer.shadowMap.type = THREE.PCFSoftShadowMap;
            document.getElementById('canvas-container').innerHTML = '';
            document.getElementById('canvas-container').appendChild(renderer.domElement);
            
            // Raycaster for clicking
            raycaster = new THREE.Raycaster();
            mouse = new THREE.Vector2();
            
            // Add stars
            addStars();
            
            // Create Sun
            createSun();
            
            // Create planets
            createPlanets();
            
            // Simple orbit controls
            setupControls();
            
            // Event listeners
            window.addEventListener('resize', onWindowResize);
            window.addEventListener('click', onMouseClick);
            document.getElementById('time-speed').addEventListener('input', onSpeedChange);
            document.getElementById('reset-view').addEventListener('click', resetView);
            
            // Hide loading
            document.querySelector('.loading').style.display = 'none';
            document.getElementById('info-panel').style.display = 'block';
            
            // Start animation
            animate();
        }

        function addStars() {
            const starsGeometry = new THREE.BufferGeometry();
            const starsMaterial = new THREE.PointsMaterial({
                color: 0xffffff,
                size: 0.7,
                sizeAttenuation: true
            });
            
            const starsVertices = [];
            for (let i = 0; i < 10000; i++) {
                const x = (Math.random() - 0.5) * 2000;
                const y = (Math.random() - 0.5) * 2000;
                const z = (Math.random() - 0.5) * 2000;
                starsVertices.push(x, y, z);
            }
            
            starsGeometry.setAttribute('position', new THREE.Float32BufferAttribute(starsVertices, 3));
            const stars = new THREE.Points(starsGeometry, starsMaterial);
            scene.add(stars);
        }

        function createSun() {
            // Create sun with glow effect
            const sunGeometry = new THREE.SphereGeometry(3, 32, 32);
            const sunMaterial = new THREE.MeshBasicMaterial({
                color: 0xfdb813,
                emissive: 0xfdb813,
                emissiveIntensity: 1
            });
            sun = new THREE.Mesh(sunGeometry, sunMaterial);
            sun.castShadow = false;
            sun.receiveShadow = false;
            scene.add(sun);
            
            // Add sun glow
            const glowGeometry = new THREE.SphereGeometry(3.5, 32, 32);
            const glowMaterial = new THREE.MeshBasicMaterial({
                color: 0xfdb813,
                transparent: true,
                opacity: 0.3
            });
            const glow = new THREE.Mesh(glowGeometry, glowMaterial);
            sun.add(glow);
            
            // Point light from sun
            const sunLight = new THREE.PointLight(0xffffff, 2, 300);
            sunLight.position.set(0, 0, 0);
            sunLight.castShadow = true;
            sunLight.shadow.mapSize.width = 2048;
            sunLight.shadow.mapSize.height = 2048;
            scene.add(sunLight);
            
            // Ambient light
            const ambientLight = new THREE.AmbientLight(0x333333);
            scene.add(ambientLight);
        }

        function createPlanetTexture(color) {
            const canvas = document.createElement('canvas');
            canvas.width = 512;
            canvas.height = 512;
            const ctx = canvas.getContext('2d');
            
            // Base color
            const gradient = ctx.createLinearGradient(0, 0, 512, 512);
            const baseColor = new THREE.Color(color);
            const darkColor = baseColor.clone().multiplyScalar(0.6);
            const lightColor = baseColor.clone().multiplyScalar(1.2);
            
            gradient.addColorStop(0, '#' + lightColor.getHexString());
            gradient.addColorStop(0.5, '#' + baseColor.getHexString());
            gradient.addColorStop(1, '#' + darkColor.getHexString());
            
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, 512, 512);
            
            // Add some texture
            for (let i = 0; i < 1000; i++) {
                const x = Math.random() * 512;
                const y = Math.random() * 512;
                const size = Math.random() * 3;
                const opacity = Math.random() * 0.3;
                
                ctx.fillStyle = `rgba(0, 0, 0, ${opacity})`;
                ctx.beginPath();
                ctx.arc(x, y, size, 0, Math.PI * 2);
                ctx.fill();
            }
            
            const texture = new THREE.CanvasTexture(canvas);
            texture.needsUpdate = true;
            return texture;
        }

        function createPlanets() {
            for (const [key, data] of Object.entries(planetData)) {
                // Create planet mesh
                const geometry = new THREE.SphereGeometry(data.radius, 32, 32);
                const texture = createPlanetTexture(data.color);
                const material = new THREE.MeshStandardMaterial({
                    map: texture,
                    roughness: 0.8,
                    metalness: 0.2
                });
                
                const planet = new THREE.Mesh(geometry, material);
                planet.castShadow = true;
                planet.receiveShadow = true;
                planet.userData = { planetKey: key, planetData: data };
                
                // Set initial position
                planet.position.x = data.distance;
                
                // Rotation tilt
                planet.rotation.z = THREE.MathUtils.degToRad(data.tilt);
                
                scene.add(planet);
                planets[key] = planet;
                
                // Create orbit line
                createOrbitLine(data.distance, data.eccentricity, data.color);
                
                // Add rings for Saturn
                if (key === 'saturn') {
                    const ringGeometry = new THREE.RingGeometry(data.radius * 1.2, data.radius * 2, 64);
                    const ringMaterial = new THREE.MeshBasicMaterial({
                        color: 0xc9b181,
                        side: THREE.DoubleSide,
                        transparent: true,
                        opacity: 0.8
                    });
                    const ring = new THREE.Mesh(ringGeometry, ringMaterial);
                    ring.rotation.x = Math.PI / 2;
                    planet.add(ring);
                }
            }
        }

        function createOrbitLine(distance, eccentricity, color) {
            const points = [];
            const segments = 200;
            
            for (let i = 0; i <= segments; i++) {
                const angle = (i / segments) * Math.PI * 2;
                const r = distance * (1 - eccentricity * eccentricity) / (1 + eccentricity * Math.cos(angle));
                const x = r * Math.cos(angle);
                const z = r * Math.sin(angle);
                points.push(new THREE.Vector3(x, 0, z));
            }
            
            const geometry = new THREE.BufferGeometry().setFromPoints(points);
            const material = new THREE.LineBasicMaterial({
                color: color,
                transparent: true,
                opacity: 0.3
            });
            
            const line = new THREE.Line(geometry, material);
            scene.add(line);
        }

        function setupControls() {
            let isRotating = false;
            let isPanning = false;
            let previousMousePosition = { x: 0, y: 0 };
            
            renderer.domElement.addEventListener('mousedown', (e) => {
                if (e.button === 0) isRotating = true;
                if (e.button === 2) isPanning = true;
                previousMousePosition = { x: e.clientX, y: e.clientY };
            });
            
            renderer.domElement.addEventListener('mouseup', () => {
                isRotating = false;
                isPanning = false;
            });
            
            renderer.domElement.addEventListener('mousemove', (e) => {
                if (isRotating) {
                    const deltaX = e.clientX - previousMousePosition.x;
                    const deltaY = e.clientY - previousMousePosition.y;
                    
                    const rotationSpeed = 0.005;
                    camera.position.applyAxisAngle(new THREE.Vector3(0, 1, 0), -deltaX * rotationSpeed);
                    
                    const currentRadius = Math.sqrt(camera.position.x ** 2 + camera.position.z ** 2);
                    const newY = camera.position.y + deltaY * 0.1;
                    camera.position.y = Math.max(-50, Math.min(50, newY));
                    
                    camera.lookAt(0, 0, 0);
                }
                
                if (isPanning) {
                    const deltaX = e.clientX - previousMousePosition.x;
                    const deltaY = e.clientY - previousMousePosition.y;
                    
                    const panSpeed = 0.05;
                    const right = new THREE.Vector3();
                    const up = new THREE.Vector3(0, 1, 0);
                    
                    camera.getWorldDirection(right);
                    right.cross(up).normalize();
                    
                    camera.position.addScaledVector(right, -deltaX * panSpeed);
                    camera.position.y -= deltaY * panSpeed;
                }
                
                previousMousePosition = { x: e.clientX, y: e.clientY };
            });
            
            renderer.domElement.addEventListener('wheel', (e) => {
                e.preventDefault();
                const zoomSpeed = 0.1;
                const direction = new THREE.Vector3();
                camera.getWorldDirection(direction);
                
                if (e.deltaY < 0) {
                    camera.position.addScaledVector(direction, zoomSpeed * 5);
                } else {
                    camera.position.addScaledVector(direction, -zoomSpeed * 5);
                }
                
                const distance = camera.position.length();
                if (distance < 10) camera.position.normalize().multiplyScalar(10);
                if (distance > 200) camera.position.normalize().multiplyScalar(200);
            });
            
            renderer.domElement.addEventListener('contextmenu', (e) => e.preventDefault());
        }

        function onMouseClick(event) {
            mouse.x = (event.clientX / window.innerWidth) * 2 - 1;
            mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;
            
            raycaster.setFromCamera(mouse, camera);
            
            const planetMeshes = Object.values(planets);
            const intersects = raycaster.intersectObjects(planetMeshes);
            
            if (intersects.length > 0) {
                const clickedPlanet = intersects[0].object;
                const data = clickedPlanet.userData.planetData;
                
                document.getElementById('planet-name').textContent = data.name;
                document.getElementById('planet-info').textContent = data.info;
                
                selectedPlanet = clickedPlanet;
            }
        }

        function onSpeedChange(event) {
            timeSpeed = parseFloat(event.target.value);
            document.getElementById('speed-value').textContent = timeSpeed.toFixed(1) + 'x';
        }

        function resetView() {
            camera.position.set(0, 30, 50);
            camera.lookAt(0, 0, 0);
            
            document.getElementById('planet-name').textContent = 'Solar System';
            document.getElementById('planet-info').textContent = 'Click on a planet to learn more about it!';
            selectedPlanet = null;
        }

        function onWindowResize() {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        }

        function animate(time = 0) {
            requestAnimationFrame(animate);
            
            // Rotate sun
            sun.rotation.y += 0.001;
            
            // Update planets
            for (const [key, planet] of Object.entries(planets)) {
                const data = planet.userData.planetData;
                
                // Axial rotation
                planet.rotation.y += data.rotationSpeed * timeSpeed;
                
                // Orbital movement with elliptical orbit
                const angle = time * 0.001 * data.speed * timeSpeed;
                const a = data.distance;
                const e = data.eccentricity;
                const r = a * (1 - e * e) / (1 + e * Math.cos(angle));
                
                planet.position.x = r * Math.cos(angle);
                planet.position.z = r * Math.sin(angle);
            }
            
            renderer.render(scene, camera);
        }

        // Initialize when page loads
        window.addEventListener('load', init);
    </script>
</body>
</html>